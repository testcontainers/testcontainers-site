$right-margin: 6.6em;
$top-margin: 0;
$right-step: 13em;
$top-step: 7.5em;

@mixin cubeGrid($row, $col) {
    right: ($right-margin + ($right-step * $col));
    top: ($top-margin + ($top-step * $row));
}

.featured-champions {
    overflow: visible;
    overflow-x: clip;
    padding: 40px 0;

    @media (min-width: 780px) {
        padding: 60px 0;
    }

    .container {
        display: flex;
        flex-direction: column;
        gap: 40px;
        align-items: center;

        @media (min-width: 860px) {
            flex-direction: row-reverse;   
        }
    }

    .content {
        position: relative;
        z-index: 3;
        font-size: rem(14px);

        @media (min-width: 860px) {
            width: 50%;
            font-size: rem(18px);

            h2,
            div {
                max-width: 450px;
            }
        }

        @media (min-width: 1200px) {
            padding-bottom: 20px;
            width: 42%;
        }
    }

    h2 {
        margin-bottom: 1em;
    }

    .champions-button {
        display: flex;
        width: max-content;
        max-width: 100%;
        align-items: center;
        gap: 10px;
        border: 1px solid $mist;
        border-radius: 6px;
        padding: 10px;
        margin-top: 2em;
        text-decoration: none;
        color: $eggplant;
        font-weight: 500;
        transition: 
            color 0.2s ease,
            background 0.2s ease;

        @media (min-width: 650px) {  
            padding: 20px 30px;
        }

        .icon-caret {
            transform: rotate(-90deg);
            height: rem(10px);
            flex-shrink: 0;
            color: $fog;
            margin-left: auto;
        }

        &:hover {
            color: $topaz;
            background: rgba($catskill, 0.45);

            .icon-external,
            .icon-caret {
                color: $topaz;
            }
        }

        &.active {
            display: flex;
        }
    }

    .image {
        position: relative;
        width: 100%;
        max-width: 360px;
        height: 7.5 * 8px * 4.6;


        @media (min-width: 500px) {
            max-width: 600px;
            height: 7.5 * 10px * 4.6;
        }

        @media (min-width: 860px) {
            width: 50%;
            height: 7.5 * 12px * 4.6;
        }

        @media (min-width: 1200px) {
            max-width: 100%;
            width: 58%;
            height: 7.5 * 14px * 4.6;
        }
    }

    .cubes {
        justify-self: flex-end;
        position: absolute;
        width: $right-margin + ($right-step * 6.8);
        height: $top-step * 4.6;
        top: 0;
        font-size: 8px;
        right: 50%;
        transform: translateX(50%);

        @media (min-width: 500px) {
            font-size: 10px;
        }

        @media (min-width: 860px) {
            font-size: 12px;
            right: 0;
            transform: none;
        }

        @media (min-width: 1200px) {
            font-size: 14px;
        }

        &::before {
            content: "";
            position: absolute;
            z-index: 2;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #fff 10%, rgba(#fff, 0) 50%);
            pointer-events: none;
        }

        &::after{
            content: "";
            position: absolute;
            z-index: 2;
            right: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(-90deg, #fff 10%, rgba(#fff, 0) 50%);
            pointer-events: none;

            @media (min-width: 860px) {
                display: none;
            }
        }

        img {
            display: block;
            height: 100%;
            width: auto;
        }
    }

    .cube {
        position: absolute;
        width: 10em;
        height: 11.9em;
        padding: 0;
        display: flex;
        align-items: stretch;
        justify-content: stretch;
        background: url("/images/cube-background.svg") no-repeat;
        background-size: contain;

        .image-wrapper {
            isolation: isolate;
            height: 100%;
            width: 100%;
            position: relative;
            -webkit-mask-image: url("/images/cube-background.svg");
            mask-image: url("/images/cube-background.svg");
            -webkit-mask-size: cover;
            mask-size: cover;
            transform: scale(.85);
        }

        img {
            inset: 0;
            object-fit: cover;
            position: absolute;
            z-index: 1;
            background: radial-gradient(circle, rgba(231,234,251,1) 30%, rgba(231,234,251,0) 70%);
            opacity: 1;
        }

        &:before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            z-index: -1;
            height: 6em;
            width: 15em;
            background: url("/images/cube-shadow.svg") no-repeat;
            background-position: bottom left;
            background-size: contain;
        }

        &:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 10em;
            height: 11.9em;
            top: 0;
            left: 0;
            z-index: 2;
            opacity: .5;
            background: url("/images/cube-foreground.svg") no-repeat;
            background-size: contain;
        }

        &.c0 {
            @include cubeGrid(0, 0);
        }

        &.c1 {
            @include cubeGrid(2, 0);
        }

        &.c2 {
            @include cubeGrid(1, 1);
        }

        &.c3 {
            @include cubeGrid(3, 1);
        }

        &.c4 {
            @include cubeGrid(0, 2);
        }

        &.c5 {
            @include cubeGrid(2, 2);
        }

        &.c6 {
            @include cubeGrid(1, 3);
        }

        &.c7 {
            @include cubeGrid(3, 3);
        }

        &.c8 {
            @include cubeGrid(0, 4);
        }

        &.c9 {
            @include cubeGrid(2, 4);
        }

        &.c10 {
            @include cubeGrid(1, 5);
        }

        &.c11 {
            @include cubeGrid(3, 5);
        }
    }
}